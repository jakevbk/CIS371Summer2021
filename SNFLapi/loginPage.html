<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">

		<title>Signin Template for Bootstrap</title>

		<link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sign-in/">

		<!-- Bootstrap core CSS -->
		<link href="./css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="./SNFLcss/signin.css" rel="stylesheet">
	</head>

	<body class="text-center">
		<form class="form-signin" onsubmit='return login()'>
			<img class="mb-4" src="https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg" alt="" width="72" height="72">
			<h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
			<label for="inputEmail" class="sr-only">Email address</label>
			<input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
			<label for="inputPassword" class="sr-only">Password</label>
			<input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
			<div class="checkbox mb-3">
				<label>
					<input type="checkbox" value="remember-me"> Remember me
				</label>
			</div>
			<button class="btn btn-lg btn-primary btn-block" id='loginButton' type="submit">Sign in</button>
			<p class="mt-5 mb-3 text-muted">&copy; 2017-2018</p>
		</form>
	</body>
	<script>
		function login(){
			let user = document.getElementById('inputEmail').value;
			let pass = document.getElementById('inputPassword').value;

			try{
				console.log(user + ', ' + pass);
			fetch(`http://irawoodring.net:3500/login`,
				{
					headers: {
						'Accept': 'application/json',
					         'Content-Type': 'application/json'
					},
					method: 'POST',
					body:JSON.stringify({ 'email': user,
						'password': pass
					})
				})
				.then(response => {
					if(!response.ok){
						console.log('User not found.');
						return false;
					} else {
						window.location.href = 'loggedIn.html';
					}
				});
			} catch(e){
				console.log(e);
			}
			return false;
		}
	</script>
</html>

